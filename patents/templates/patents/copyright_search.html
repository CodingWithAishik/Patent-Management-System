{% extends 'patents/base.html' %}

{% block title %}Search Copyrights{% endblock %}

{% block content %}
<div class="page-header">
    <h1>üîç Search Copyrights</h1>
    <a href="{% url 'patents:copyright_list' %}" class="btn btn-secondary">‚Üê Back to List</a>
</div>

<div class="search-container">
    <h2>Select Search Parameters</h2>
    <form method="get" action="{% url 'patents:copyright_search' %}">
        <div class="search-params">
            <label>
                <input type="checkbox" class="search-param-checkbox" data-field="field-year" name="enable_year">
                Year
            </label>
            <label>
                <input type="checkbox" class="search-param-checkbox" data-field="field-faculty" name="enable_faculty">
                Faculty/Students
            </label>
            <label>
                <input type="checkbox" class="search-param-checkbox" data-field="field-title" name="enable_title">
                Title
            </label>
            <label>
                <input type="checkbox" class="search-param-checkbox" data-field="field-inventors" name="enable_inventors">
                Inventors
            </label>
        </div>

        <div class="search-fields">
            <div id="field-year" class="search-field form-group">
                <label for="year">Year:</label>
                <input type="text" id="year" name="year" placeholder="Enter year (e.g., 2023)">
            </div>
            <div id="field-faculty" class="search-field form-group">
                <label for="faculty_students">Faculty/Students:</label>
                <input type="text" id="faculty_students" name="faculty_students" placeholder="Enter faculty name">
            </div>
            <div id="field-title" class="search-field form-group">
                <label for="title">Title:</label>
                <input type="text" id="title" name="title" placeholder="Enter title keywords">
            </div>
            <div id="field-inventors" class="search-field form-group">
                <label for="inventors">Inventors:</label>
                <input type="text" id="inventors" name="inventors" placeholder="Enter inventor name">
            </div>
        </div>

        <button type="submit" class="btn btn-primary mt-2">Search</button>
        <a href="{% url 'patents:copyright_search' %}" class="btn btn-secondary mt-2">Clear</a>
    </form>
</div>

{% if search_performed %}
<div class="table-container mt-2">
    <h2>Search Results ({{ count }} found)</h2>
    {% if results %}
    <table>
        <thead>
            <tr>
                <th>Sl. No.</th>
                <th>Year</th>
                <th>Faculty/Students</th>
                <th>Title</th>
                <th>Filing Info</th>
                <th>Inventors</th>
                <th class="no-sort">Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for item in results %}
            <tr>
                <td>{{ item.sl_no|default:"-" }}</td>
                <td>{{ item.year|default:"-" }}</td>
                <td>{{ item.faculty_students|truncatewords:8 }}</td>
                <td>{{ item.title|truncatewords:10 }}</td>
                <td>{{ item.filing_info|truncatewords:8 }}</td>
                <td>{{ item.inventors|truncatewords:6 }}</td>
                <td>
                    <div class="actions">
                        <a href="{% url 'patents:copyright_update' item.pk %}" class="btn btn-primary btn-small">Edit</a>
                        <a href="{% url 'patents:copyright_delete' item.pk %}" class="btn btn-danger btn-small">Delete</a>
                    </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p class="no-data">No records match your search criteria.</p>
    {% endif %}
</div>
{% endif %}
{% endblock %}
