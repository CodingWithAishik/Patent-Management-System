{% extends 'patents/base.html' %}

{% block title %}Search Filed Patents{% endblock %}

{% block content %}
<div class="page-header">
    <h1>üîç Search Filed Patents</h1>
    <a href="{% url 'patents:filed_list' %}" class="btn btn-secondary">‚Üê Back to List</a>
</div>

<div class="search-container">
    <h2>Select Search Parameters</h2>
    <form method="get" action="{% url 'patents:filed_search' %}">
        <div class="search-params">
            <label>
                <input type="checkbox" class="search-param-checkbox" data-field="field-date" name="enable_date">
                Date of Filing
            </label>
            <label>
                <input type="checkbox" class="search-param-checkbox" data-field="field-inventors" name="enable_inventors">
                Inventors
            </label>
            <label>
                <input type="checkbox" class="search-param-checkbox" data-field="field-title" name="enable_title">
                Title
            </label>
            <label>
                <input type="checkbox" class="search-param-checkbox" data-field="field-appno" name="enable_appno">
                Application Number
            </label>
            <label>
                <input type="checkbox" class="search-param-checkbox" data-field="field-applicant" name="enable_applicant">
                Applicant Name
            </label>
        </div>

        <div class="search-fields">
            <div id="field-date" class="search-field form-group">
                <label for="date_of_filing">Date of Filing:</label>
                <input type="text" id="date_of_filing" name="date_of_filing" placeholder="Enter date or year">
            </div>
            <div id="field-inventors" class="search-field form-group">
                <label for="inventors">Inventors:</label>
                <input type="text" id="inventors" name="inventors" placeholder="Enter inventor name">
            </div>
            <div id="field-title" class="search-field form-group">
                <label for="title">Title:</label>
                <input type="text" id="title" name="title" placeholder="Enter title keywords">
            </div>
            <div id="field-appno" class="search-field form-group">
                <label for="application_number">Application Number:</label>
                <input type="text" id="application_number" name="application_number" placeholder="Enter application number">
            </div>
            <div id="field-applicant" class="search-field form-group">
                <label for="applicant_name">Applicant Name:</label>
                <input type="text" id="applicant_name" name="applicant_name" placeholder="Enter applicant name">
            </div>
        </div>

        <button type="submit" class="btn btn-primary mt-2">Search</button>
        <a href="{% url 'patents:filed_search' %}" class="btn btn-secondary mt-2">Clear</a>
    </form>
</div>

{% if search_performed %}
<div class="table-container mt-2">
    <h2>Search Results ({{ count }} found)</h2>
    {% if results %}
    <table>
        <thead>
            <tr>
                <th>Date of Filing</th>
                <th>Inventors</th>
                <th>Title</th>
                <th>Application No.</th>
                <th class="no-sort">Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for item in results %}
            <tr>
                <td>{{ item.date_of_filing|default:"-" }}</td>
                <td>{{ item.inventors|truncatewords:6 }}</td>
                <td>{{ item.title|truncatewords:12 }}</td>
                <td>{{ item.application_number|default:"-" }}</td>
                <td>
                    <div class="actions">
                        <a href="{% url 'patents:filed_update' item.pk %}" class="btn btn-primary btn-small">Edit</a>
                        <a href="{% url 'patents:filed_delete' item.pk %}" class="btn btn-danger btn-small">Delete</a>
                    </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p class="no-data">No records match your search criteria.</p>
    {% endif %}
</div>
{% endif %}
{% endblock %}
